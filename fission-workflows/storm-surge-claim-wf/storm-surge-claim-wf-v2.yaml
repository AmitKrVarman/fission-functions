apiVersion: 1
description: Storm Surge Claim
output: CreateTicket
# Input: 'San Fransisco, CA'
tasks:
  # Capture TYPE FORM Req and transform for Zen Desk
  TransformData:
    run: transform-data
    inputs: "{$.Invocation.Inputs.default}"

  # GET Weather Data
  GetWeatherData:
    run: get-weather-data-v2
    inputs: "{$.Tasks.TransformData.Output.weatherAPIInput}"
    requires:
    - TransformData
  # Compute Weather Risk
  ComputeWeatherRisk:
    run: compute-weather-risk
    inputs: "{$.Tasks.GetWeatherData.Output}"
    requires:
    - GetWeatherData

    # Create Fresh Desk Ticket
  CreateTicket:
    run: register-ticket-v2
    inputs: "{$.Tasks.TransformData.Output.ticketDetails}"
    requires:
    - TransformData
    - GetWeatherData
    - ComputeWeatherRisk


